{"ast":null,"code":"import { API } from \"../../backend\";\nimport { cartEmpty } from \"../../core/helper/carthelper\";\nexport const signup = user => {\n  return fetch(`${API}user/`, {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(user)\n  }).then(response => {\n    return response.json();\n  }).catch(err => console.log(err));\n};\nexport const signin = user => {\n  const formData = new FormData();\n\n  for (const name in user) {\n    formData.append(name, user[name]);\n  }\n\n  for (var key of formData.keys()) {\n    console.log(\"MYKEY: \", key);\n  }\n\n  return fetch(`${API}user/login/`, {\n    method: \"POST\",\n    body: formData\n  }).then(response => {\n    console.log(\"success\", response);\n    return response.json();\n  }).catch(err => console.log(err));\n};\nexport const authenticate = (data, next) => {\n  if (typeof window !== undefined) {\n    localStorage.setItem(\"jwt\", JSON.stringify(data));\n    next();\n  }\n};\nexport const isAuthenticated = () => {\n  if (typeof window == undefined) {\n    return false;\n  }\n\n  if (localStorage.getItem(\"jwt\")) {\n    return JSON.parse(localStorage.getItem(\"jwt\"));\n  } else {\n    return false;\n  }\n};\nexport const signout = next => {\n  const userID = isAuthenticated() && isAuthenticated().next.id;\n\n  if (typeof window !== undefined) {\n    localStorage.removeItem(\"jwt\");\n    cartEmpty(() => {});\n    return fetch(`${API}uswer/logout/${userID}`, {\n      method: \"GET\"\n    }).then(response => {\n      console.log(\"signout success\");\n      next();\n    }).catch(err => console.log(err));\n  }\n};","map":{"version":3,"sources":["C:/Users/prabh/OneDrive/desktop/web develop/lcodev/projfrontend/src/auth/helper/index.js"],"names":["API","cartEmpty","signup","user","fetch","method","headers","Accept","body","JSON","stringify","then","response","json","catch","err","console","log","signin","formData","FormData","name","append","key","keys","authenticate","data","next","window","undefined","localStorage","setItem","isAuthenticated","getItem","parse","signout","userID","id","removeItem"],"mappings":"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","sourcesContent":["import {API} from \"../../backend\"\r\nimport {cartEmpty} from \"../../core/helper/carthelper\"\r\n\r\nexport const signup =(user)=>{\r\n    return fetch(`${API}user/`,{\r\n        method:\"POST\",\r\n        headers:{\r\n            Accept:\"application/json\",\r\n            \"Content-Type\":\"application/json\",\r\n\r\n        },\r\n        body:JSON.stringify(user),\r\n    })\r\n    .then((response)=>{\r\n        return response.json();\r\n    })\r\n    .catch((err)=>console.log(err));\r\n}\r\n\r\nexport const signin =user=>{\r\n\r\n    const formData=new FormData();\r\n    for (const name in user){\r\n        formData.append(name,user[name])\r\n    }\r\n\r\nfor(var key of formData.keys()){\r\n    console.log(\"MYKEY: \",key);\r\n}\r\n\r\n\r\n\r\n    return fetch(`${API}user/login/`,{\r\n        method:\"POST\",\r\n        body:formData,\r\n    })\r\n    .then((response)=>\r\n    {   console.log(\"success\",response);\r\n        return response.json();\r\n    })\r\n    .catch((err)=>console.log(err));\r\n};\r\n\r\nexport const authenticate=(data,next)=>{\r\n    if(typeof window !== undefined){\r\n        localStorage.setItem(\"jwt\",JSON.stringify(data));\r\n        next();\r\n    }\r\n};\r\n\r\nexport const isAuthenticated=()=>{\r\n    if(typeof window ==undefined){\r\n        return false\r\n    }\r\n\r\n    if(localStorage.getItem(\"jwt\")){\r\n        return(JSON.parse(localStorage.getItem(\"jwt\")));\r\n    }\r\n    else{\r\n        return false;\r\n\r\n    }\r\n};\r\n\r\nexport const signout =(next)=>{\r\n    const userID =isAuthenticated() && isAuthenticated().next.id;\r\n\r\n\r\n    if(typeof window !==undefined){\r\n        localStorage.removeItem(\"jwt\")\r\n        cartEmpty(()=>{});\r\n       return fetch(`${API}uswer/logout/${userID}`,{\r\n           method:\"GET\"\r\n       })\r\n       .then(response =>{\r\n           console.log(\"signout success\")\r\n           next();\r\n       })\r\n       .catch(err=>console.log(err));\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}