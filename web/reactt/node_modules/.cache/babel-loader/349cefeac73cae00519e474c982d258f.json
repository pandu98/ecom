{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\prabh\\\\OneDrive\\\\desktop\\\\web develop\\\\lcodev\\\\projfrontend\\\\src\\\\core\\\\PaymentB.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { cartEmpty } from \"./helper/carthelper\";\nimport { getmeToken, processPayment } from \"./helper/paymenthelper\";\nimport { createOrder } from \"./helper/orderhelper\";\nimport { isAuthenticated, signout } from \"../auth/helper\";\nimport DropIn from \"braintree-web-drop-in-react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst PaymentB = ({\n  products,\n  reload = undefined,\n  setReload = f => f\n}) => {\n  _s();\n\n  const [info, setInfo] = useState({\n    loading: false,\n    success: false,\n    clientToken: null,\n    error: \"\",\n    instance: {}\n  });\n  const userId = isAuthenticated && isAuthenticated().user.id;\n  const token = isAuthenticated && isAuthenticated().token;\n\n  const getToken = (userId, token) => {\n    getmeToken(userId, token).then(info => {\n      console.log(info);\n\n      if (info.error) {\n        setInfo({ ...info,\n          error: info.error\n        });\n        signout(() => {\n          return /*#__PURE__*/_jsxDEV(Redirect, {\n            to: \"/\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 39,\n            columnNumber: 24\n          }, this);\n        });\n      } else {\n        const clientToken = info.clientToken;\n        setInfo({\n          clientToken\n        });\n      }\n    });\n  };\n\n  useEffect(() => {\n    getToken(userId, token);\n  }, []);\n\n  const getAmount = () => {\n    let amount = 0;\n    products.map(p => {\n      amount = amount + parseInt(p.price);\n    });\n    return amount;\n  };\n\n  const showbtnDropIn = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: info.clientToken !== null && products.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(DropIn, {\n          options: {\n            authorization: info.clientToken\n          },\n          onInstance: instance => info.instance = instance\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-block btn-success\",\n          children: \"Buy now\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Please login fisrt or add something in cart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"your bill is \", getAmount()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }, this), showbtnDropIn()]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 5\n  }, this);\n};\n\n_s(PaymentB, \"s45VOdB/jNgH4aYMZkzUNAsAoIg=\");\n\n_c = PaymentB;\nexport default PaymentB;\n\nvar _c;\n\n$RefreshReg$(_c, \"PaymentB\");","map":{"version":3,"sources":["C:/Users/prabh/OneDrive/desktop/web develop/lcodev/projfrontend/src/core/PaymentB.js"],"names":["React","useState","useEffect","Redirect","cartEmpty","getmeToken","processPayment","createOrder","isAuthenticated","signout","DropIn","PaymentB","products","reload","undefined","setReload","f","info","setInfo","loading","success","clientToken","error","instance","userId","user","id","token","getToken","then","console","log","getAmount","amount","map","p","parseInt","price","showbtnDropIn","length","authorization"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from \"react\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport { cartEmpty } from \"./helper/carthelper\";\r\nimport {getmeToken ,processPayment} from \"./helper/paymenthelper\"\r\nimport {createOrder} from \"./helper/orderhelper\"\r\nimport { isAuthenticated ,signout} from \"../auth/helper\";\r\n\r\nimport DropIn from \"braintree-web-drop-in-react\"\r\n\r\nconst PaymentB=({\r\nproducts,\r\nreload=undefined,\r\nsetReload=(f)=>f,\r\n\r\n})=>{\r\n\r\n    const [info,setInfo]=useState({\r\n        loading:false,\r\n        success:false,\r\n        clientToken:null,\r\n        error:\"\",\r\n        instance:{},\r\n    });\r\n\r\nconst userId=isAuthenticated && isAuthenticated().user.id;\r\nconst token= isAuthenticated && isAuthenticated().token;\r\n\r\nconst getToken=(userId,token)=>{\r\n    getmeToken(userId,token)\r\n    .then((info)=>{\r\n        console.log(info)\r\n        \r\n        if(info.error){\r\n            setInfo({\r\n                ...info,\r\n                error:info.error\r\n            })\r\n            signout(()=>{\r\n                return <Redirect to=\"/\" />\r\n            })\r\n        }\r\n        else{\r\n            const clientToken=info.clientToken;\r\n            setInfo({clientToken});\r\n        }\r\n    })\r\n};\r\n\r\nuseEffect(()=>{\r\n    getToken(userId,token);\r\n},[]);\r\n\r\nconst getAmount=()=>{\r\n    let amount=0;\r\n    products.map((p)=>{\r\n        amount=amount+parseInt(p.price);\r\n    });\r\n    return amount;\r\n};\r\n\r\nconst showbtnDropIn=()=>{\r\n    return(\r\n        <div>\r\n            {\r\n                info.clientToken !==null&& products.length >0?\r\n                (\r\n                    <div>\r\n                        <DropIn\r\n                        options={{authorization:info.clientToken}}\r\n                        onInstance={instance =>(info.instance=instance)}\r\n                        >\r\n                             </DropIn>\r\n                    <button className=\"btn btn-block btn-success\">Buy now</button>\r\n                       \r\n</div>\r\n                ):\r\n                (\r\n                    <h3>Please login fisrt or add something in cart</h3>\r\n                )\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nreturn(\r\n    <div>\r\n        <h3>your bill is {getAmount()} \r\n        </h3>\r\n        {showbtnDropIn()}\r\n    </div>\r\n\r\n)\r\n  \r\n\r\n\r\n};\r\nexport default PaymentB;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}